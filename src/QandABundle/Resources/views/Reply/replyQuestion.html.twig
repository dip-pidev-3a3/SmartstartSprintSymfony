{% extends "SmartStartBase.html.twig" %}
        {% block body %}
            <style>
                .accordion {
                    background-color: #eee;
                    color: #444;
                    cursor: pointer;
                    padding: 18px;
                    width: 100%;
                    border: none;
                    text-align: left;
                    outline: none;
                    font-size: 15px;
                    transition: 0.4s;
                }

                .active, .accordion:hover {
                    background-color: #ccc;
                }

                .panel {
                    padding: 0 18px;
                    display: none;
                    background-color: white;
                    overflow: hidden;
                }
            </style>
            <section class="bg-title-page flex-c-m p-t-160 p-b-80 p-l-15 p-r-15" style="background-image: url({{ asset('assets/images/blog-banner.png') }});">


            </section>


            <!-- Content page -->
            <section>

            <div class="bread-crumb bo5-b p-t-17 p-b-17">


                <div class="container">

                    <a href="{{ path('blog_ListPosts') }}" class="txt27">
                        Home
                    </a>

                    <span class="txt29 m-l-10 m-r-10">/</span>

                    <a href="{{ path('blog_ListPosts') }}" class="txt27">
                        BLOG
                    </a>
                </div>
            </div>




            <div class="container">
            <div class="content-wrapper">
                <section class="content-header">
                    <h1>
                        reply this question
                        <small> if you answer it you get bonus </small>
                    </h1>
                </section>
                <section class="content">
                    <div class="callout callout-info">
                        <h4> {{ quest.question }} ?</h4>
                        <p> {{ quest.description }}  </p>
                    </div>
                    {% for r in responses %}
                            <div class="box">
                                <div class="box-header with-border">
                                    <h3 class="box-title"> {{ r.idu.name }}</h3>
                                    <div class="box-tools pull-right"><button type="button" class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="Collapse">
                                            <i class="fa fa-minus"></i>  {{ r.replydate|date("m/d/Y")}} </button>
                                        <button type="button" class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip" title="Remove">
                                            <i class="fa fa-times"></i></button>
                                    </div>
                                </div>
                                <div class="box-body">
                                    <ul class="box-tools pull-left">
    <li>{% if app.user!=null and r.idu!=app.user %}
        <a href="{{ path('vote_up',{('idr'):r.id}) }}" class="link">{% endif %}
            <i class="fa fa-chevron-up"></i> </a>  </li>
    <li><span id="score" class="js-likes">{{ r.score }} </span>  </li>
    <li>{% if app.user!=null and r.idu!=app.user %}
       <a href="{{ path('vote_down',{('idr'):r.id}) }}" class="link"> {% endif %}
              <i class="fa fa-chevron-down"></i> </a>  </li>
                                    </ul>
                                    <ul>   {{ r.content|raw }}  </ul>
                                </div>
                                <div class="box-footer">
                                    {% if r.theanswer is not null  %}
                                        <button type="button" class="btn btn-box-tool">
                                            <i class="fa fa-check"></i> {{ r.theanswer|date("m/d/Y") }} </button>
                                    {% elseif r.idu!=app.user %}
                                            <a href="{{ path('satisfy_me',{'idr':r.id}) }}" > <button type="button" class="btn btn-box-tool" >
                                                    <i class="fa fa-times"></i> satisfied </button> </a>
                                    {% endif %}
                                    {% if app.user==r.idu %}
                                        <a href="{{ path('delete_reply',{'idr':r.id}) }}" > <button type="button" class="btn btn-box-tool" >
                                                <i class="fa fa-times"></i> delete </button> </a>
                                        <a href="{{ path('update_reply',{'idr':r.id}) }}" > <button type="button" class="btn btn-box-tool">
                                                <i class="fa fa-times"></i> Modify </button> </a>
                                    {% endif %}
                                </div>
                             </div>
                    {% endfor %}
                </section>
                <section>
                    <div class="box-body">  {% if app.user!=null %}    {{ form_start(fr) }}
                             {{ form_widget(fr.Add) }}
                    <div class="input-group input-group-sm">
                             {{ form_widget(fr.content) }}

                    </div>  {{ form_end(fr) }} {% endif %}
                    </div>
                </section>
            </div>
            </div>
            </section>

            <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
            <script>
                var likelink=document.querySelectorAll('.link')
                document.querySelectorAll('.link').forEach(function(link){
                    link.addEventListener('click',onClickBtnLlike)
                })
                function onClickBtnLlike(event) {
                    event.preventDefault();
                    const url=this.href;
                    const spanCount=this.querySelector('span.js-likes');
                    console.log("qqq");
                    axios.get(url).then(function (response) {
                        console.log(response);
                        console.log(response.data.votes);
                        spanCount.textContent=response.data.votes;
                        console.log("qqq");
                    })
                }
            </script>



        {% endblock %}